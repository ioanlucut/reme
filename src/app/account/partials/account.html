<!-- Account sections -->
<div class="account__sections" account-form-toggle>

    <!--Sign in-->
    <div class="account__section" ng-if="AccountFormToggle.state === ACCOUNT_FORM_STATE.login" ng-controller="LoginCtrl">

        <!-- Title -->
        <h1 class="account__title">Welcome!</h1>

        <!-- Login form -->
        <form name="loginForm" ng-submit="login(loginData)" novalidate>

            <!-- Account controls -->
            <div class="account__controls">

                <!-- Flash messages. -->
                <div flash-alert active-class="in alert" class="fade">
                    <span class="alert-message">{{flash.message}}</span>
                </div>

                <!-- Form groups -->
                <div class="account__controls__form-groups--last">

                    <!-- Form group -->
                    <div class="form-group" ng-class="{'has-error': loginForm.$submitted && (loginForm.email.$invalid || loginForm.$invalid)}">
                        <input class="form-control form-control--account" type="email" placeholder="email" name="email" ng-model="loginData.email" required />
                        <span class="help-block" ng-if="loginForm.email.$invalid && loginForm.$submitted">Your email address is mandatory.</span>
                    </div>

                    <!-- Form group -->
                    <div class="form-group" ng-class="{'has-error': loginForm.$submitted && (loginForm.password.$invalid || loginForm.$invalid)}">
                        <input class="form-control form-control--account" type="password" placeholder="password" name="password" ng-model="loginData.password" required />
                        <span class="help-block" ng-if="loginForm.password.$invalid && loginForm.$submitted">Your email address is mandatory.</span>
                    </div>
                </div>

                <!-- Reset password -->
                <div class="form-group">
                    <a class="link-secondary" href="#" ng-click="AccountFormToggle.setState(ACCOUNT_FORM_STATE.forgotPassword)">Forgot login details?</a>
                </div>

                <!-- Button container -->
                <button class="btn account__button" type="submit">Sign in</button>
            </div>
        </form>

        <a class="link-primary" href="#" ng-click="AccountFormToggle.setState(ACCOUNT_FORM_STATE.requestSignUpRegistration)">Don't have an account yet? Sign up!</a>

    </div>

    <!--Sign up-->
    <div class="account__section" ng-if="AccountFormToggle.state == ACCOUNT_FORM_STATE.requestSignUpRegistration" ng-controller="RequestSignUpRegistrationCtrl">

        <!-- Title -->
        <h1 class="account__title">Get started!</h1>

        <!-- Sign-up form -->
        <form name="requestSignUpRegistrationForm" ng-submit="requestSignUpRegistration()" novalidate focus-first-error-on-submit>

            <!-- Account controls -->
            <div class="account__controls">

                <!-- Flash messages. -->
                <div flash-alert active-class="in alert" class="fade">
                    <span class="alert-message">{{flash.message}}</span>
                </div>

                <!-- Form groups -->
                <div class="account__controls__form-groups--last">

                    <!-- Form group -->
                    <div class="form-group" ng-class="{'has-error': requestSignUpRegistrationForm.email.$invalid && ( requestSignUpRegistrationForm.email.$touched || requestSignUpRegistrationForm.$submitted )}">
                        <input class="form-control form-control--account" type="email" placeholder="Your email address" name="email" ng-model="requestSignUpRegistrationData.email" ng-model-options="{ debounce: 800 }" required valid-email unique-email />

                        <!-- Error messages -->
                        <div class="home__signup__sections__section__validation-messages" ng-class="{'has-error': requestSignUpRegistrationForm.email.$invalid && ( requestSignUpRegistrationForm.email.$touched || requestSignUpRegistrationForm.$submitted )}" ng-messages="requestSignUpRegistrationForm.email.$error" ng-if="requestSignUpRegistrationForm.email.$touched || requestSignUpRegistrationForm.$submitted">
                            <div ng-message="required">Your email address is mandatory.</div>
                            <div ng-message="validEmail">This email address is not valid.</div>
                            <div ng-message="uniqueEmail">This email address is already used.</div>
                        </div>
                        <div class="home__signup__sections__section__checking-availability" ng-if="requestSignUpRegistrationForm.email.$pending"> Checking availability...</div>
                        <div class="home__signup__sections__section__checking-availability" ng-if="! requestSignUpRegistrationForm.email.$pending && requestSignUpRegistrationForm.email.$touched && requestSignUpRegistrationForm.email.$valid"> Yay! Email is available.</div>
                    </div>
                </div>

                <!-- Button container -->
                <button class="btn account__button" type="submit">Create new account</button>
            </div>
        </form>

        <a class="link-primary" href="#" ng-click="AccountFormToggle.setState(ACCOUNT_FORM_STATE.login)">Already have an account? Sign in here!</a>

    </div>

    <!-- Sign up email sent section -->
    <div class="account__section" ng-if="AccountFormToggle.state == ACCOUNT_FORM_STATE.requestSignUpRegistrationEmailSent">

        <!-- Title -->
        <h1 class="account__title">Email has been sent!</h1>

        <!-- Explain -->
        <span class="account__explain">We've sent you an email with the instructions on how to confirm your registration.</span>

        <!-- Button container -->
        <a href="#" ng-click="AccountFormToggle.setState(ACCOUNT_FORM_STATE.login)">Continue</a>
    </div>

    <!-- Recover password section -->
    <div class="account__section" ng-if="AccountFormToggle.state == ACCOUNT_FORM_STATE.forgotPassword" ng-controller="ForgotPasswordCtrl">

        <!-- Title -->
        <h1 class="account__title">Can't remember your password?</h1>

        <!-- Explain -->
        <span class="account__explain">
            Enter below the e-mail you use to log in. <br />
            We'll send you instructions on how to reset your password.
        </span>

        <!-- Forgot password form -->
        <form name="forgotPasswordForm" ng-submit="requestPasswordReset(forgotPasswordData.email)" novalidate focus-first-error-on-submit>

            <!-- Account controls -->
            <div class="account__controls">

                <!-- Flash messages. -->
                <div flash-alert active-class="in alert" class="fade">
                    <span class="alert-message">{{flash.message}}</span>
                </div>

                <!-- Form groups -->
                <div class="account__controls__form-groups--last">

                    <!-- Form group -->
                    <div class="form-group" ng-class="{'has-error': forgotPasswordForm.email.$invalid && forgotPasswordForm.$submitted }">
                        <input class="form-control form-control--account" type="email" placeholder="Your email address" name="email" ng-model="forgotPasswordData.email" required valid-email />

                        <div class="help-block" ng-messages="forgotPasswordForm.email.$error" ng-if="forgotPasswordForm.$submitted">
                            <div ng-message="required">Your email address is mandatory.</div>
                            <div ng-message="validEmail">This email address is not valid.</div>
                        </div>
                    </div>
                </div>

                <!-- Button container -->
                <button class="btn account__button" type="submit">Reset password</button>
            </div>
        </form>

        <a href="#" ng-click="AccountFormToggle.setState(ACCOUNT_FORM_STATE.login)">Nevermind, take me back!</a>
    </div>

    <!-- Password recovery email sent section -->
    <div class="account__section" ng-if="AccountFormToggle.state == ACCOUNT_FORM_STATE.forgotPasswordEmailSent">

        <!-- Title -->
        <h1 class="account__title">Email has been sent!</h1>

        <!-- Explain -->
        <span class="account__explain">We've sent you an email with the instructions on how to reset your password.</span>

        <!-- Button container -->
        <a href="#" ng-click="AccountFormToggle.setState(ACCOUNT_FORM_STATE.login)">Continue</a>
    </div>

</div>